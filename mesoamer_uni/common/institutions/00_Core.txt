#
# remember to add graphics for relevant ones when you add to this
#
# if a modifier is scaled, its multiplied with development in the province.


#######################################
# Feudalism.  
# 
# Most in the old world start with it.
#######################################

feudalism = {
	penalty = 0.5
	bonus = {
		free_leader_pool = 1
	}

	history = {
		is_year = 1000
	}
	
	# no need for events, as its there from the start.
	#can_start = {	is_year = 1000	}
	#start_chance = 100
	#on_start = institution_events.1

	can_embrace = {
		always = yes
	}

	embracement_speed = {
		modifier = {
			factor = 0.5
			scale = yes
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_OR_COAST_PROVINCE_HAS_EMBRACED
				any_friendly_coast_border_province = {
					feudalism = 100
				}
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income. (Or it has a more than long term goal...)
		factor = 24
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
	}
}

##############
#World System#
##############

world_system = {
	penalty = 0.50
	
	bonus = {
		trade_efficiency = 0.10
		idea_cost = -0.05
	}
	
	historical_start_date = 1440.1.1
	historical_start_province = 1 #Tenochtitlan
	
	history = {
		OR = {
			AND = {
				is_year = 1440
				region = central_mexico_r 
			}
			
			AND = {
				is_year = 1445
				region = michoacan_r 
			}
			
			AND = {
				is_year = 1450
				region = yucatan_r 
			}
			
			AND = {
				is_year = 1450
				region = mayan_highlands_r  
			}
			is_year = 1460
		}
	}
	
	can_start = {
		is_year = 1440
		OR = {
			AND = {
				area = western_shore_a
				owner = {
					government_rank = 2
				}
				trade_power = 10
				development = 40
			}
			AND = {
				area = eastern_shore_a
				owner = {
					government_rank = 2
				}
				trade_power = 10
				development = 50
			}
			AND = {
				area = patzcuaro_a 
				owner = {
					government_rank = 2
				}
				trade_power = 20
				development = 50
			}
			AND = {
				owner = {
					government_rank = 2
				}
				trade_power = 20
				development = 60
				trade_income_percentage = 0.33
			}
		}
	}
	start_chance = 50		#in 100 for when a province can_start
	on_start = institutions.01
	
	can_embrace = {
		always = yes
	}
	
	embracement_speed = {
		modifier = {
			factor = 0.75
			scale = yes
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_WORLD_SYSTEM
				any_friendly_coast_border_province = {
					world_system = 100
				}
			}
		}
		modifier = {
			factor = 0.75
			scale = yes
			custom_trigger_tooltip = {
				tooltip = ANY_NEIGHBOR_WORLD_SYSTEM
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					world_system = 100
				}
			}
		}
		
		modifier = {
			factor = 0.10
			scale = yes
			custom_trigger_tooltip = {
				tooltip = TRADE_POWER_WORLD_SYSTEM
				province_trade_power = 5
			}
		}
		
		modifier = {
			factor = 0.10
			scale = yes
			custom_trigger_tooltip = {
				tooltip = DEVELOPMENT_WORLD_SYSTEM
				development = 20
			}
		}
		
		modifier = {
			factor = 0.25
			scale = yes
			custom_trigger_tooltip = {
				tooltip = KINGDOM_CAPITAL_WORLD_SYSTEM
				is_capital = yes
				owner = {
					government_rank = 2
				}
			}
		}
		modifier = {
			factor = 2
			scale = yes
			custom_trigger_tooltip = {
				tooltip = EMBRACED_WORLD_SYSTEM
				owner = {
					has_institution = world_system
				}
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 24
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}



##################################
#Draft and Transportation Animals#
##################################

dat_animals = {
	penalty = 0.50
	
	bonus = {
		global_autonomy = -0.20
		stability_cost_modifier = -0.15
	}
	
	historical_start_date = 1519.1.1
	historical_start_province = 947 #Cempoala
	
	history = {
		OR = {
			AND = {
				is_year = 1525
				region = central_mexico_r 
			}
			
			AND = {
				is_year = 1530
				region = michoacan_r 
			}
			
			AND = {
				is_year = 1620
				region = yucatan_r 
			}
			
			AND = {
				is_year = 1550
				region = mayan_highlands_r  
			}
			is_year = 1630
		}
	}
	
	can_start = {
		AND = {
			is_year = 1519
			is_core = CAX
		}
	}
	start_chance = 25		#in 100 for when a province can_start
	on_start = institutions.05
	
	can_embrace = {
		always = yes
	}
	
	embracement_speed = {
		modifier = {
			factor = 0.10
			scale = yes
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_DATANIMALS
				any_friendly_coast_border_province = {
					dat_animals = 100
				}
			}
		}
		modifier = {
			factor = 0.25
			scale = no
			custom_trigger_tooltip = {
				tooltip = ANY_NEIGHBOR_DATANIMALS
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					dat_animals = 100
				}
			}
		}
		
		modifier = {
			factor = 0.05
			scale = yes
			custom_trigger_tooltip = {
				tooltip = DEVELOPMENT_DATANIMALS
				development = 15
			}
		}
		
		modifier = {
			factor = 0.10
			scale = yes
			custom_trigger_tooltip = {
				tooltip = STAPLE_CROPS_DATANIMALS
				trade_goods = grain
			}
		}
		
		modifier = {
			factor = 1.0
			scale = yes
			custom_trigger_tooltip = {
				tooltip = EMBRACED_DATANIMALS
				owner = {
					has_institution = dat_animals
				}
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 24
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}

#########################
#Weaponized Metalworking#
#########################

weaponized_metalworking = {
	penalty = 0.50
	
	bonus = {
		infantry_power = 0.25
	}
	
	historical_start_date = 1521.1.1
	historical_start_province = 947 #Cempoala
	
	history = {
		OR = {
			AND = {
				is_year = 1525
				region = central_mexico_r 
			}
			
			AND = {
				is_year = 1530
				region = michoacan_r 
			}
			
			AND = {
				is_year = 1620
				region = yucatan_r 
			}
			
			AND = {
				is_year = 1550
				region = mayan_highlands_r  
			}
			is_year = 1630
		}
	}
	
	can_start = {
		OR = { 
			AND = { 
				is_year = 1521
				OR = {
					owner = {
						bronze = 1
					}
					owner = {
						balsas = 1
					}
				}
				OR = {
					owner = { 
						defensive_war_with = CAX
					}
					owner = { 
						offensive_war_with = CAX
					}
				}
			}
			AND = {
				is_year = 1525
				is_core = CAX
			}
		}
	}
	start_chance = 50		#in 100 for when a province can_start
	on_start = institutions.03
	
	can_embrace = {
		always = yes
	}
	
	embracement_speed = {
		modifier = {
			factor = 0.05
			scale = yes
			custom_trigger_tooltip = {
				tooltip = FRIENDLY_NEIGHBOR_WPN_METAL
				any_friendly_coast_border_province = {
					weaponized_metalworking = 100
				}
			}
		}
		modifier = {
			factor = 0.10
			scale = yes
			custom_trigger_tooltip = {
				tooltip = ANY_NEIGHBOR_WPN_METAL
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					weaponized_metalworking = 100
				}
			}
		}
		
		modifier = {
			factor = 0.10
			scale = yes
			custom_trigger_tooltip = {
				tooltip = COPPER_WPN_METAL
				trade_goods = bronze
			}
		}
		
		modifier = {
			factor = 0.10
			scale = yes
			custom_trigger_tooltip = {
				tooltip = BALSAS_WPN_METAL
				trade_goods = balsas
			}
		}
		
		modifier = {
			factor = 0.10
			scale = yes
			custom_trigger_tooltip = {
				tooltip = AT_WAR_WPN_METAL
				owner = {
					is_at_war = yes
				}
			}
		}
		
		modifier = {
			factor = 0.50
			scale = no
			custom_trigger_tooltip = {
				tooltip = AT_WAR_CAX_WPN_METAL
				OR = {
					owner = {
						offensive_war_with = CAX
					}
					owner = {
						defensive_war_with = CAX
					}
				}
			}
		}
		
		modifier = {
			factor = 1.0
			scale = yes
			custom_trigger_tooltip = {
				tooltip = EMBRACED_WPN_METAL
				owner = {
					has_institution = weaponized_metalworking
				}
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income, and higher if loans are needed. (Or it has a more than long term goal...)
		factor = 24
		
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}