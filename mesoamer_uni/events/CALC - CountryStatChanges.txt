namespace = countrystats 

#Updates government stats each year
country_event = {
	id = countrystats.01
	
	title = "countrystats1.t"
	desc = "countrystats1.d"
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	
	hidden = yes
	
	option = {
		name = "countrystats1.a"
		
		#Centralization
		every_country = { 
		if = {
			limit = {
				has_idea = territorial_ideology 
			}
			change_variable = { which = centralization value = 0.50 }
		}
		if = {
			limit = {
				has_idea = centralization_ideology
			}
			change_variable = { which = centralization value = 0.125 }
		}
		if = {
			limit = {
				has_idea = true_centralization
			}
			change_variable = { which = centralization value = 0.125 }
		}
		
		if = {  
			limit = {
				has_active_policy = centralization_of_power
			}
			change_variable = { which = centralization value = 0.20 }
		}
		
		if = {  
			limit = {
				has_active_policy = decentralization_of_power
			}
			change_variable = { which = centralization value = -2.0 }
		}
		
		#Legal Tradition
		subtract_variable = { which = lt_gain which = lt_gain }
		if = {
			limit = {
				has_idea = centralized_law_code
			}
			change_variable = { which = lt_gain value = 1.0 }
		}
		
		if = {  
			limit = {
				has_active_policy = strengthen_legal_system
			}
			change_variable = { which = lt_gain value = 0.25 }
		}
		
		if = {
			limit = {
				has_country_flag = ln_increased_legal_protections
			}
			change_variable = { which = legaltradition value = -0.25 }
		}
		
		if = {
			limit = {
				has_country_flag = ms_guarantee_legal_protection
			}
			change_variable = { which = legaltradition value = -0.25 }
		}
		
		if = {
			limit = {
				has_country_flag = ph_withold_legal_judgement
			}
			change_variable = { which = legaltradition value = -0.50 }
		}
		
		if = {
			limit = {
				has_country_flag = un_exclusive_legal_protections
			}
			change_variable = { which = legaltradition value = -0.50 }
		}
		
		
		every_owned_province = {
			if = {
				limit = {
					has_building = law1
				}
				controller = { 
					change_variable = { which = legaltradition value = 0.10 }
				}
			}
			if = {
				limit = {
					has_building = law2
				}
				controller = { 
					change_variable = { which = legaltradition value = 0.25 }
				}
			}
			if = {
				limit = {
					has_building = law3
				}
				controller = { 
					change_variable = { which = legaltradition value = 0.50 }
				}
			}
		}
		
		change_variable = { which = legaltradition which = lt_gain }
		
		#Meritocracy
		if = {  
			limit = {
				has_active_policy = promote_meritocracy
			}
			change_variable = { which = meritocratictradition value = 0.25 }
		}
		
		if = {  
			limit = {
				has_active_policy = promote_patrimonialism
			}
			change_variable = { which = meritocratictradition value = -2.0 }
		}
		
		if = {
			limit = {
				has_country_flag = an_exclusive_military_leadership
			}
			change_variable = { which = meritocratictradition value = -0.25 }
		}
		
		if = {
			limit = {
				has_country_flag = an_exclusive_military_orders
			}
			change_variable = { which = meritocratictradition value = -0.25 }
		}
		
		if = {
			limit = {
				has_country_flag = an_exclusive_bureaucracy_positions
			}
			change_variable = { which = meritocratictradition value = -0.25 }
		}
		
		if = {
			limit = {
				has_country_flag = an_exclusive_social_rights
			}
			change_variable = { which = meritocratictradition value = -0.25 }
		}
		
		if = {
			limit = {
				has_country_flag = ln_guarantee_noble_status
			}
			change_variable = { which = meritocratictradition value = -0.25 }
		}
		
		if = {
			limit = {
				has_country_flag = ln_ban_new_men
			}
			change_variable = { which = meritocratictradition value = -0.50 }
		}
		
		if = {
			limit = {
				has_country_flag = ln_expanded_social_rights
			}
			change_variable = { which = meritocratictradition value = -0.25 }
		}
		
		if = {
			limit = {
				has_country_flag = ln_exclusive_military_orders
			}
			change_variable = { which = meritocratictradition value = -0.25 }
		}
		
		if = {
			limit = {
				has_country_flag = ms_permit_land_ownership
			}
			change_variable = { which = meritocratictradition value = -0.25 }
		}
		
		if = {
			limit = {
				has_country_flag = ph_reserve_advisories
			}
			change_variable = { which = meritocratictradition value = -0.50 }
		}
		
		if = {
			limit = {
				has_country_flag = un_exclusive_generalship
			}
			change_variable = { which = meritocratictradition value = -0.25 }
		}
		
		if = {
			limit = {
				has_country_flag = un_exclusive_officers
			}
			change_variable = { which = meritocratictradition value = -0.25 }
		}
		
		if = {
			limit = {
				has_country_flag = un_exclusive_advisory_positions
			}
			change_variable = { which = meritocratictradition value = -0.25 }
		}
		
		if = {
			limit = {
				has_country_flag = un_exclusive_bureaucracy_positions
			}
			change_variable = { which = meritocratictradition value = -0.25 }
		}
		
		if = {
			limit = {
				has_country_flag = un_exclusive_social_rights
			}
			change_variable = { which = meritocratictradition value = -0.25 }
		}
		
		
		#Religious Tradition
		if = {  
			limit = {
				has_active_policy = promote_religious_dogma
			}
			change_variable = { which = religioustradition value = 0.25 }
		}
		
		if = {  
			limit = {
				has_active_policy = reduce_religious_influence
			}
			change_variable = { which = religioustradition value = -1.0 }
		}
		
		if = {
			limit = {
				has_country_flag = ph_elevate_social_status
			}
			change_variable = { which = religioustradition value = 0.25 }
		}
		
		if = {
			limit = {
				has_country_flag = ph_mandate_religious_schooling
			}
			change_variable = { which = religioustradition value = 0.50 }
		}
		
		every_owned_province = { 
			limit = {
				has_building = missionschool
			}
			controller = {
				change_variable = { which = religioustradition value = 0.05}
			}
		}
		
		#Militancy
		if = {
			limit = {
				has_idea = militaristic_propaganda
			}
			change_variable = { which = militancy value = 0.50 }
		}
		if = {
			limit = {
				has_idea = integrated_military
			}
			change_variable = { which = militancy value = 0.50 }
		}
		if = {
			limit = {
				has_idea = socialadvancement
			}
			change_variable = { which = militancy value = 0.50 }
		}
		if = {
			limit = {
				has_idea = warcouncil
			}
			change_variable = { which = militancy value = 1.0 }
		}
		if = {
			limit = {
				has_idea = dompolicy
			}
			change_variable = { which = militancy value = 0.50 }
		}
		if = {
			limit = {
				has_idea = nicepolicy
			}
			change_variable = { which = militancy value = -0.50 }
		}
		if = {
			limit = {
				army_tradition = 20
			}
			change_variable = { which = militancy value = 0.20 }
		}
		if = {
			limit = {
				army_tradition = 40
			}
			change_variable = { which = militancy value = 0.20 }
		}
		if = {
			limit = {
				army_tradition = 60
			}
			change_variable = { which = militancy value = 0.20 }
		}
		if = {
			limit = {
				army_tradition = 80
			}
			change_variable = { which = militancy value = 0.20 }
		}
		if = {
			limit = {
				army_tradition = 100
			}
			change_variable = { which = militancy value = 0.20 }
		}
		
		if = {  
			limit = {
				has_active_policy = militarization
			}
			change_variable = { which = militancy value = 0.25 }
		}
		
		if = {  
			limit = {
				has_active_policy = demilitarization
			}
			change_variable = { which = militancy value = -2.0 }
		}
		
		#Keeps any stat from going above 100 or below -100
		if = { 
			limit = {
				check_variable = { 
					which = centralization
					value = 100
				}
			}
			set_variable = { which = centralization value = 100 }
		}
		if = { 
			limit = {
				check_variable = { 
					which = legaltradition
					value = 100
				}
			}
			set_variable = { which = legaltradition value = 100 }
		}
		if = { 
			limit = {
				check_variable = { 
					which = meritocratictradition
					value = 100
				}
			}
			set_variable = { which = meritocratictradition value = 100 }
		}
		if = { 
			limit = {
				check_variable = { 
					which = religioustradition
					value = 100
				}
			}
			set_variable = { which = religioustradition value = 100 }
		}
		if = { 
			limit = {
				check_variable = { 
					which = intellectualtradition
					value = 100
				}
			}
			set_variable = { which = intellectualtradition value = 100 }
		}
		if = { 
			limit = {
				check_variable = { 
					which = militancy
					value = 100
				}
			}
			set_variable = { which = militancy value = 100 }
		}
		if = { 
			limit = {
				NOT = { 
					check_variable = { 
						which = centralization
						value = -100
					}
				}
			}
			set_variable = { which = centralization value = -100 }
		}
		if = { 
			limit = {
				NOT = { 
					check_variable = { 
						which = legaltradition
						value = -100
					}
				}
			}
			set_variable = { which = legaltradition value = -100 }
		}
		if = { 
			limit = {
				NOT = { 
					check_variable = { 
						which = meritocratictradition
						value = -100
					}
				}
			}
			set_variable = { which = meritocratictradition value = -100 }
		}
		if = { 
			limit = {
				NOT = { 
					check_variable = { 
						which = religioustradition
						value = -100
					}
				}
			}
			set_variable = { which = religioustradition value = -100 }
		}
		if = { 
			limit = {
				NOT = { 
					check_variable = { 
						which = intellectualtradition
						value = -100
					}
				}
			}
			set_variable = { which = intellectualtradition value = -100 }
		}
		if = { 
			limit = {
				NOT = { 
					check_variable = { 
						which = militancy
						value = -100
					}
				}
			}
			set_variable = { which = militancy value = -100 }
		}
		
		#Calculate Change from last year 
		set_variable = { which = cnt_new which = centralization }
		set_variable = { which = lt_new which = legaltradition }
		set_variable = { which = mrt_new which = meritocratictradition }
		set_variable = { which = rt_new which = religioustradition }
		set_variable = { which = mil_new which = militancy }
		
		subtract_variable = { which = cnt_new which = cnt_current }
		subtract_variable = { which = lt_new which = lt_current }
		subtract_variable = { which = mrt_new which = mrt_current }
		subtract_variable = { which = rt_new which = rt_current }
		subtract_variable = { which = mil_new which = mil_current }
		
		set_variable = { which = cnt_current which = centralization }
		set_variable = { which = lt_current which = legaltradition }
		set_variable = { which = mrt_current which = meritocratictradition }
		set_variable = { which = rt_current which = religioustradition }
		set_variable = { which = mil_current which = militancy }
		}
		
	}
}
