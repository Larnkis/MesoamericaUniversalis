namespace = tributecoll

#THE FOLLOWING ARE PART OF THE 'SET TRIBUTE REQUIREMENTS' INTERFACE!

#What area to manage?
country_event = {
	id = tributecoll.01

	title = "tributecoll1.t"
	desc = "tributecoll1.d"
	picture = ECONOMY_eventPicture

	is_triggered_only = yes
		
	#option = {
	#	name = "tributecoll1.a"
	#	country_event = { id = tributecoll.02 }
	#}

	option = {
		name = "tributecoll1.b"
		country_event = { id = tributecoll.03 }
	}

	option = {
		name = "tributecoll1.c"
		country_event = { id = tributecoll.04 }
	}

	option = {
		name = "tributecoll1.dd"
		clr_country_flag = managingtribute
	}
}

#Wealth
country_event = {
	id = tributecoll.02

	title = "tributecoll2.t"
	desc = "tributecoll2.d"
	picture = ECONOMY_eventPicture

	is_triggered_only = yes

	option = {
		name = "tributecoll2.a"
		add_country_modifier = {
			name = "highwealth"
			duration = -1
		}
		remove_country_modifier = lowwealth
		remove_country_modifier = normalwealth
		country_event = { id = tributecoll.01 }
	}

	option = {
		name = "tributecoll2.b"
		add_country_modifier = {
			name = "normalwealth"
			duration = -1
		}
		remove_country_modifier = lowwealth
		remove_country_modifier = highwealth
		country_event = { id = tributecoll.01 }
	}

	option = {
		name = "tributecoll2.c"
		add_country_modifier = {
			name = "lowwealth"
			duration = -1
		}
		remove_country_modifier = highwealth
		remove_country_modifier = normalwealth
		country_event = { id = tributecoll.01 }
	}

	option = {
		name = "tributecoll2.dd"
		country_event = { id = tributecoll.01 }
	}
}
	
#Warriors
country_event = {
	id = tributecoll.03

	title = "tributecoll3.t"
	desc = "tributecoll3.d"
	picture = ECONOMY_eventPicture

	is_triggered_only = yes

	option = {
		name = "tributecoll3.a"
		trigger = {
			NOT = { has_country_modifier = changedwarriorreqs }
		}
		add_country_modifier = {
			name = "highwarriors"
			duration = -1
		}
		hidden_effect = {
			add_country_modifier = {
				name = changedwarriorreqs
				duration = 730
			}
		}
		remove_country_modifier = lowwarriors
		remove_country_modifier = normalwarriors
		country_event = { id = tributecoll.01 }
	}

	option = {
		name = "tributecoll3.b"
		trigger = {
			NOT = { has_country_modifier = changedwarriorreqs }
		}
		add_country_modifier = {
			name = "normalwarriors"
			duration = -1
		}
		hidden_effect = {
			add_country_modifier = {
				name = changedwarriorreqs
				duration = 730
			}
		}
		remove_country_modifier = highwarriors
		remove_country_modifier = lowwarriors
		country_event = { id = tributecoll.01 }
	}

	option = {
		name = "tributecoll3.c"
		trigger = {
			NOT = { has_country_modifier = changedwarriorreqs }
		}
		add_country_modifier = {
			name = "lowwarriors"
			duration = -1
		}
		hidden_effect = {
			add_country_modifier = {
				name = changedwarriorreqs
				duration = 730
			}
		}
		remove_country_modifier = highwarriors
		remove_country_modifier = normalwarriors
		country_event = { id = tributecoll.01 }
	}

	option = {
		name = "tributecoll3.dd"
		country_event = { id = tributecoll.01 }
	}
}

#Supplies
country_event = {
	id = tributecoll.04

	title = "tributecoll4.t"
	desc = "tributecoll4.d"
	picture = ECONOMY_eventPicture

	is_triggered_only = yes

	option = {
		name = "tributecoll4.a"
		trigger = {
			NOT = { has_country_modifier = changedsuppliesreqs }
		}
		add_country_modifier = {
			name = "highsupplies"
			duration = -1
		}
		hidden_effect = {
			add_country_modifier = {
				name = changedsuppliesreqs
				duration = 730
			}
		}
		remove_country_modifier = normalsupplies
		remove_country_modifier = lowsupplies
		country_event = { id = tributecoll.01 }
	}

	option = {
		name = "tributecoll4.b"
		trigger = {
			NOT = { has_country_modifier = changedsuppliesreqs }
		}
		add_country_modifier = {
			name = "normalsupplies"
			duration = -1
		}
		hidden_effect = {
			add_country_modifier = {
				name = changedsuppliesreqs
				duration = 730
			}
		}
		remove_country_modifier = highsupplies
		remove_country_modifier = lowsupplies
		country_event = { id = tributecoll.01 }
	}

	option = {
		name = "tributecoll4.c"
		trigger = {
			NOT = { has_country_modifier = changedsuppliesreqs }
		}
		add_country_modifier = {
			name = "lowsupplies"
			duration = -1
		}
		hidden_effect = {
			add_country_modifier = {
				name = changedsuppliesreqs
				duration = 730
			}
		}
		remove_country_modifier = highsupplies
		remove_country_modifier = normalsupplies
		country_event = { id = tributecoll.01 }
	}

	option = {
		name = "tributecoll4.dd"
		country_event = { id = tributecoll.01 }
	}
}
#END INTERFACE

#Tribute Collection Event
country_event = {
	id = tributecoll.05

	title = "tributecoll5.t"
	desc = "tributecoll5.d"
	picture = ECONOMY_eventPicture

	trigger = {
		is_year = 1429
		num_of_protectorates = 1
		OR = {
			government = altepetl
			government = hegemonic_kingdom
			government = hegemonic_empire
		}
		NOT = { has_country_modifier = recentcollection }
	}

	mean_time_to_happen = {
		days = 0
	}

	immediate = {
		hidden_effect = {
			add_country_modifier = {
				name = recentcollection
				duration = 365
			}
		}
	}

	option = {
		name = "tributecoll5.a"

		every_country = {
			limit = {
				is_subject_of = ROOT
			}
			country_event = { id = tributecoll.06 }
		}
	}
}

#For Vassals
country_event = {
	id = tributecoll.06

	title = "tributecoll6.t"
	desc = "tributecoll6.d"
	picture = ECONOMY_eventPicture

	is_triggered_only = yes

	option = {
		name = "tributecoll6.a"

		FROM = {
			country_event = { id = tributecoll.07 }
		}

		if = {
			limit = {
				FROM = {
					has_country_modifier = highwarriors
				}
			}
			add_manpower = -0.06
		}
		if = {
			limit = {
				FROM = {
					has_country_modifier = normalwarriors
				}
			}
			add_manpower = -0.04
		}

		if = {
			limit = {
				FROM = {
					has_country_modifier = lowwarriors
				}
			}
			add_manpower = -0.02
		}

		if = {
			limit = {
				FROM = {
					has_country_modifier = highsupplies
				}
			}
			
			if = {
				limit = {
					ROOT = {
						capital_scope = {
							OR = {
								trade_goods = grain
								trade_goods = aquaticfoods
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = staplefooditems value = -6 }
				}
			}
			
			if = {
				limit = {
					ROOT = {
						capital_scope = {
							OR = {
								trade_goods = fruits
								trade_goods = choclate
								trade_goods = salt
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = luxuryfooditems value = -6 }
				}
			}
			
			if = {
				limit = {
					ROOT = {
						capital_scope = {
							OR = {
								trade_goods = textiles
								trade_goods = preciousstones
								trade_goods = plumes
								trade_goods = bronze
								trade_goods = gold
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = luxurygoods value = -6 }
				}
			}
			
			if = {
				limit = {
					ROOT = {
						capital_scope = {
							trade_goods = obsidian
						}
					}
				}
				
				ROOT = {
					change_variable = { which = militarysupplies value = -6 }
				}
			}
			
			if = {
				limit = {
					ROOT = {
						capital_scope = {
							OR = { 
								trade_goods = lime
								trade_goods = lumber
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = buildingsupplies value = -6 }
				}
			}
		}
		
		if = {
			limit = {
				FROM = {
					has_country_modifier = normalsupplies
				}
			}
			
			if = {
				limit = {
					ROOT = {
						capital_scope = {
							OR = {
								trade_goods = grain
								trade_goods = aquaticfoods
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = staplefooditems  value = -4 }
				}
			}
			
			if = {
				limit = {
					ROOT = {
						capital_scope = {
							OR = {
								trade_goods = fruits
								trade_goods = choclate
								trade_goods = salt
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = luxuryfooditems value = -4 }
				}
			}
			
			if = {
				limit = {
					ROOT = {
						capital_scope = {
							OR = {
								trade_goods = textiles
								trade_goods = preciousstones
								trade_goods = plumes
								trade_goods = bronze
								trade_goods = gold
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = luxurygoods value = -4 }
				}
			}
			
			if = {
				limit = {
					ROOT = {
						capital_scope = {
							trade_goods = obsidian
						}
					}
				}
				
				ROOT = {
					change_variable = { which = militarysupplies value = -4 }
				}
			}
			
			if = {
				limit = {
					ROOT = {
						capital_scope = {
							OR = { 
								trade_goods = lime
								trade_goods = lumber
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = buildingsupplies value = -4 }
				}
			}
		}

		if = {
			limit = {
				FROM = {
					has_country_modifier = lowsupplies
				}
			}
			
			if = {
				limit = {
					ROOT = {
						capital_scope = {
							OR = {
								trade_goods = grain
								trade_goods = aquaticfoods
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = staplefooditems value = -2 }
				}
			}
			
			if = {
				limit = {
					ROOT = {
						capital_scope = {
							OR = {
								trade_goods = fruits
								trade_goods = choclate
								trade_goods = salt
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = luxuryfooditems value = -2 }
				}
			}
			
			if = {
				limit = {
					ROOT = {
						capital_scope = {
							OR = {
								trade_goods = textiles
								trade_goods = preciousstones
								trade_goods = plumes
								trade_goods = bronze
								trade_goods = gold
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = luxurygoods value = -2 }
				}
			}
			
			if = {
				limit = {
					ROOT = {
						capital_scope = {
							trade_goods = obsidian
						}
					}
				}
				
				ROOT = {
					change_variable = { which = militarysupplies value = -2 }
				}
			}
			
			if = {
				limit = {
					ROOT = {
						capital_scope = {
							OR = { 
								trade_goods = lime
								trade_goods = lumber
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = buildingsupplies value = -2 }
				}
			}
		}

		ai_chance = {
			factor = 80
		}
	}

	option = {
		name = "tributecoll6.b"
		add_stability = -1
		FROM = {
			country_event = { id = tributecoll.08 }
		}

		ai_chance = {
			factor = 20
			
			modifier = {
				factor = 0
				ROOT = {
					NOT = { liberty_desire = 1 }
				}
			}
			
			modifier = {
				factor = 0.20
				ROOT = {
					AND = {
						liberty_desire = 1
						NOT = { liberty_desire = 10 }
					}
				}
			}
			
			modifier = {
				factor = 0.40
				ROOT = {
					AND = {
						liberty_desire = 10
						NOT = { liberty_desire = 20 }
					}
				}
			}
			
			modifier = {
				factor = 0.60
				ROOT = {
					AND = {
						liberty_desire = 20
						NOT = { liberty_desire = 30 }
					}
				}
			}
			
			modifier = {
				factor = 0.80
				ROOT = {
					AND = { 
						liberty_desire = 30
						NOT = { liberty_desire = 40 }
					}
				}
			}
			
			modifier = {
				factor = 1
				ROOT = {
					AND = {
						liberty_desire = 40
						NOT = { liberty_desire = 50 }
					}
				}
			}
			
			modifier = {
				factor = 1.50
				ROOT = {
					AND = {
						liberty_desire = 50
						NOT = { liberty_desire = 60 }
					}
				}
			}
			
			modifier = {
				factor = 2
				ROOT = {
					AND = {
						liberty_desire = 60
						NOT = { liberty_desire = 70 }
					}
				}
			}
			
			modifier = {
				factor = 2.25
				ROOT = {
					AND = {
						liberty_desire = 70
						NOT = { liberty_desire = 80 }
					}
				}
			}
			
			modifier = {
				factor = 2.50
				ROOT = {
					AND = {
						liberty_desire = 70
						NOT = { liberty_desire = 80 }
					}
				}
			}
			
			modifier = {
				factor = 2.75
				ROOT = {
					AND = {
						liberty_desire = 70
						NOT = { liberty_desire = 80 }
					}
				}
			}
			
			modifier = {
				factor = 3
				ROOT = {
					AND = {
						liberty_desire = 80
						NOT = { liberty_desire = 90 }
					}
				}
			}
			
			modifier = {
				factor = 3.5
				ROOT = {
					liberty_desire = 90
				}
			}
		}
	}
}

#Vassal Pays
country_event = {
	id = tributecoll.07

	title = "tributecoll7.t"
	desc = "tributecoll7.d"
	picture = ECONOMY_eventPicture

	is_triggered_only = yes
		
	option = {
		name = "tributecoll7.a"

		if = {
			limit = {
				ROOT = {
					has_country_modifier = highwarriors
				}
			}
			add_manpower = 0.05
		}
		if = {
			limit = {
				ROOT = {
					has_country_modifier = normalwarriors
				}
				
			}
			add_manpower = 0.03
		}

		if = {
			limit = {
				ROOT = {
					has_country_modifier = lowwarriors
				}
			}
			add_manpower = 0.01
		}

		if = {
			limit = {
				ROOT = {
					has_country_modifier = highsupplies
				}
			}
			
			if = {
				limit = {
					FROM = {
						capital_scope = {
							OR = {
								trade_goods = grain
								trade_goods = aquaticfoods
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = staplefooditems value = 6 }
				}
			}
			
			if = {
				limit = {
					FROM = {
						capital_scope = {
							OR = {
								trade_goods = fruits
								trade_goods = choclate
								trade_goods = salt
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = luxuryfooditems value = 6 }
				}
			}
			
			if = {
				limit = {
					FROM = {
						capital_scope = {
							OR = {
								trade_goods = textiles
								trade_goods = preciousstones
								trade_goods = plumes
								trade_goods = bronze
								trade_goods = gold
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = luxurygoods value = 6 }
				}
			}
			
			if = {
				limit = {
					FROM = {
						capital_scope = {
							trade_goods = obsidian
						}
					}
				}
				
				ROOT = {
					change_variable = { which = militarysupplies value = 6 }
				}
			}
			
			if = {
				limit = {
					FROM = {
						capital_scope = {
							OR = { 
								trade_goods = lime
								trade_goods = lumber
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = buildingsupplies value = 6 }
				}
			}
		}
		if = {
			limit = {	
				ROOT = {
					has_country_modifier = normalsupplies
				}
			}
			
			if = {
				limit = {
					FROM = {
						capital_scope = {
							OR = {
								trade_goods = grain
								trade_goods = aquaticfoods
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = staplefooditems  value = 4 }
				}
			}
			
			if = {
				limit = {
					FROM = {
						capital_scope = {
							OR = {
								trade_goods = fruits
								trade_goods = choclate
								trade_goods = salt
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = luxuryfooditems value = 4 }
				}
			}
			
			if = {
				limit = {
					FROM = {
						capital_scope = {
							OR = {
								trade_goods = textiles
								trade_goods = preciousstones
								trade_goods = plumes
								trade_goods = bronze
								trade_goods = gold
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = luxurygoods value = 4 }
				}
			}
			
			if = {
				limit = {
					FROM = {
						capital_scope = {
							trade_goods = obsidian
						}
					}
				}
				
				ROOT = {
					change_variable = { which = militarysupplies value = 4 }
				}
			}
			
			if = {
				limit = {
					FROM = {
						capital_scope = {
							OR = { 
								trade_goods = lime
								trade_goods = lumber
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = buildingsupplies value = 4 }
				}
			}
		}

		if = {
			limit = {
				ROOT = {
					has_country_modifier = lowsupplies
				}
			}
			
			if = {
				limit = {
					FROM = {
						capital_scope = {
							OR = {
								trade_goods = grain
								trade_goods = aquaticfoods
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = staplefooditems value = 2 }
				}
			}
			
			if = {
				limit = {
					FROM = {
						capital_scope = {
							OR = {
								trade_goods = fruits
								trade_goods = choclate
								trade_goods = salt
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = luxuryfooditems value = 2 }
				}
			}
			
			if = {
				limit = {
					FROM = {
						capital_scope = {
							OR = {
								trade_goods = textiles
								trade_goods = preciousstones
								trade_goods = plumes
								trade_goods = bronze
								trade_goods = gold
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = luxurygoods value = 2 }
				}
			}
			
			if = {
				limit = {
					FROM = {
						capital_scope = {
							trade_goods = obsidian
						}
					}
				}
				
				ROOT = {
					change_variable = { which = militarysupplies value = 2 }
				}
			}
			
			if = {
				limit = {
					FROM = {
						capital_scope = {
							OR = { 
								trade_goods = lime
								trade_goods = lumber
							}
						}
					}
				}
				
				ROOT = {
					change_variable = { which = buildingsupplies value = 2 }
				}
			}
		}
	}
}

#Vassal Won't Pay
country_event = {
	id = tributecoll.08

	title = "tributecoll8.t"
	desc = "tributecoll8.d"
	picture = ECONOMY_eventPicture

	is_triggered_only = yes

	option = {
		name = "tributecoll8.a"
		hidden_effect = {
			vassalize = FROM
		}
		free_vassal = FROM
		add_opinion = {
			who = FROM 
			modifier = opinion_refusedtribute
		}
		FROM = {
			add_opinion = {
				who = ROOT 
				modifier = opinion_refusedtribute
			}
		}
	}
}